static Future<void> deleteSettlement(String settlementId) async {
  final user = await _client.auth.currentUser;
  if (user == null) {
    throw Exception('User not authenticated');
  }

  // First, verify this settlement involves the current user (as payer or receiver)
  final checkResponse = await _client
      .from('settlements')
      .select('id')
      .eq('id', settlementId)
      .or('payer_id.eq.${user.id},receiver_id.eq.${user.id}')
      .maybeSingle();

  if (checkResponse == null) {
    throw Exception(
        'Settlement not found or you do not have permission to delete it');
  }

  await _client
      .from('settlements')
      .delete()
      .eq('id', settlementId);
}
